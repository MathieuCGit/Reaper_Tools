<!DOCTYPE html>
<html lang="en">
<!-- Documentation generated by LuaDox: https://github.com/jtackaberry/luadox -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>SharpOrFlat - MC - Reaper Scripts</title>
	<link href="../prism.css?7653a2d" rel="stylesheet" />
    <link rel="stylesheet" href="../luadox.css?7653a2d" type="text/css">
    <link href="../custom.css?7653a2d" rel="stylesheet" />
</head>
<body class="module-sharporflat">
<div class="topbar">
<div class="group one">
<div class="description"><span>MC - Reaper Scripts</span></div>
</div>
<div class="group two">
<div class="button iconleft"><a href="https://github.com/MathieuCGit" title=""><img src="../img/i-github.svg?7653a2d" alt=""/><span>GitHub</span></a></div>
</div>
<div class="group three">
<div class="button iconleft"><a href="../module/MergingTool.html" title="MergingTool"><img src="../img/i-left.svg?7653a2d" alt=""/><span>Previous</span></a></div>
<div class="button iconright"><a href="../module/WriteData.html" title="WriteData"><span>Next</span><img src="../img/i-right.svg?7653a2d" alt=""/></a></div>
</div>
</div>
<div class="sidebar">
<form action="../search.html">
<input class="search" name="q" type="search" placeholder="Search" />
</form>
<div class="sections">
<div class="heading">Contents</div>
<ul>
<li><a href="#SharpOrFlat">Module <code>SharpOrFlat</code></a></li>
<li><a href="#private"><p>PRIVATE METHODS</p>
</a></li>
<li><a href="#public"><p>PUBLIC METHODS</p>
</a></li>
</ul>
</div>
<div class="modules">
<div class="heading">Modules</div>
<ul>
<li><a href="../module/ReaCAT.html">ReaCAT</a></li>
<li><a href="../module/dbg.html">dbg</a></li>
<li><a href="../module/Analyzer.html">Analyzer</a></li>
<li><a href="../module/Collector.html">Collector</a></li>
<li><a href="../module/MergingTool.html">MergingTool</a></li>
<li class="selected"><a href="../module/SharpOrFlat.html">SharpOrFlat</a></li>
<li><a href="../module/WriteData.html">WriteData</a></li>
</ul>
</div>
</div>
<div class="body">
<div class="section">
<h2 class="module" id="SharpOrFlat">Module <code>SharpOrFlat</code>
<a class="permalink" href="#SharpOrFlat" title="Permalink to this definition">¶</a>
</h2>
<div class="inner">
<p>ReaCAT - Sharp or Flat</p>
<p>This module aims to detect the key signature we are working with. It also provides methods to manipulate chords according to the key signature detected.</p>

</div>
</div>
<div class="section">
<h2 class="section" id="private">PRIVATE METHODS

<a class="permalink" href="#private" title="Permalink to this definition">¶</a>
</h2>
<div class="inner">
<div class="synopsis">
<h3>Synopsis</h3>
<div class="heading">Functions</div>
<table class="functions ">
<tr>
<td class="name"><a href="#SharpOrFlat.ascii_to_utf8"><var>SharpOrFlat.ascii_to_utf8</var></a>()</td>
<td class="doc"><p>This function let us convert flat and sharp symbols from ASCII to UTF8</p>
</td>
</tr>
<tr>
<td class="name"><a href="#SharpOrFlat.utf8_to_ascii"><var>SharpOrFlat.utf8_to_ascii</var></a>()</td>
<td class="doc"><p>This function let us convert flat and sharp symbols from UTF8 to ASCII</p>
</td>
</tr>
<tr>
<td class="name"><a href="#SharpOrFlat.get_key_sign_at_ppq"><var>SharpOrFlat.get_key_sign_at_ppq</var></a>()</td>
<td class="doc"><p>Find if we already have a key signature at ppq parameter, +-10 ticks</p>
<div class="see">See also <a href="../module/SharpOrFlat.html#SharpOrFlat.sharp_or_flat">SharpOrFlat.sharp_or_flat()</a></div>
</td>
</tr>
<tr>
<td class="name"><a href="#SharpOrFlat.refresh_fix"><var>SharpOrFlat.refresh_fix</var></a>()</td>
<td class="doc"><p>Fix for refresh and for writing into all midi items (because does not always work when the cursor is at the start of emasure)</p>
<div class="admonition note"><div class="title">SNIPPET</div><div class="body"><p>    from <a href="https://forum.cockos.com/member.php?u=24199">bFooz</a> here : <a href="https://forum.cockos.com/showpost.php?p=2445234&amp;postcount=8">https://forum.cockos.com/showpost.php?p=2445234&amp;postcount=8</a></p>
</div></div>
</td>
</tr>
</table>
</div>
<dl class="functions">
<dt id="SharpOrFlat.ascii_to_utf8">
<span class="icon"></span><var>SharpOrFlat.ascii_to_utf8</var>(<em>str</em>)
<a class="permalink" href="#SharpOrFlat.ascii_to_utf8" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>This function let us convert flat and sharp symbols from ASCII to UTF8</p>

<div class="heading">Parameters</div>
<table class="parameters">
<tr>
<td class="name"><var>str</var></td>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>generally the chord name is passed in argument.</p>
</td>
</tr>
</table>
<div class="heading">Return Values</div>
<table class="returns">
<tr>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>str a converted to UTF8 sharp or flat symbol.</p>
</td>
</tr>
</table>
</dd>
<dt id="SharpOrFlat.utf8_to_ascii">
<span class="icon"></span><var>SharpOrFlat.utf8_to_ascii</var>(<em>str</em>)
<a class="permalink" href="#SharpOrFlat.utf8_to_ascii" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>This function let us convert flat and sharp symbols from UTF8 to ASCII</p>

<div class="heading">Parameters</div>
<table class="parameters">
<tr>
<td class="name"><var>str</var></td>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>generally the chord name is passed in argument.</p>
</td>
</tr>
</table>
<div class="heading">Return Values</div>
<table class="returns">
<tr>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>str a converted to ASCII sharp or flat symbol.</p>
</td>
</tr>
</table>
</dd>
<dt id="SharpOrFlat.get_key_sign_at_ppq">
<span class="icon"></span><var>SharpOrFlat.get_key_sign_at_ppq</var>(<em>take</em>, <em>pos</em>)
<a class="permalink" href="#SharpOrFlat.get_key_sign_at_ppq" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>Find if we already have a key signature at ppq parameter, +-10 ticks</p>
<div class="see">See also <a href="../module/SharpOrFlat.html#SharpOrFlat.sharp_or_flat">SharpOrFlat.sharp_or_flat()</a></div>

<div class="heading">Parameters</div>
<table class="parameters">
<tr>
<td class="name"><var>take</var></td>
<td class="types">(<em>take</em>)</td>
<td class="doc"><p>is a valid reaper take</p>
</td>
</tr>
<tr>
<td class="name"><var>pos</var></td>
<td class="types">(<em>number</em>)</td>
<td class="doc"><p>is the start of the measure and/or item take in ppqp (generaly 0)</p>
</td>
</tr>
</table>
<div class="heading">Return Values</div>
<table class="returns">
<tr>
<td class="name">1.</td>
<td class="types">(<em>int</em>)</td>
<td class="doc"><p>event id. Returns -1 if no MIDI key signature msg in the take</p>
</td>
</tr>
<tr>
<td class="name">2.</td>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>event msg containing MIDI raw data message</p>
</td>
</tr>
</table>
</dd>
<dt id="SharpOrFlat.refresh_fix">
<span class="icon"></span><var>SharpOrFlat.refresh_fix</var>()
<a class="permalink" href="#SharpOrFlat.refresh_fix" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>Fix for refresh and for writing into all midi items (because does not always work when the cursor is at the start of emasure)</p>
<div class="admonition note"><div class="title">SNIPPET</div><div class="body"><p>    from <a href="https://forum.cockos.com/member.php?u=24199">bFooz</a> here : <a href="https://forum.cockos.com/showpost.php?p=2445234&amp;postcount=8">https://forum.cockos.com/showpost.php?p=2445234&amp;postcount=8</a></p>
</div></div>

</dd>
</dl>
</div>
</div>
<div class="section">
<h2 class="section" id="public">PUBLIC METHODS

<a class="permalink" href="#public" title="Permalink to this definition">¶</a>
</h2>
<div class="inner">
<div class="synopsis">
<h3>Synopsis</h3>
<div class="heading">Fields</div>
<table class="fields ">
<tr>
<td class="name"><a href="#SharpOrFlat.enharmonic_table_sharp"><var>enharmonic_table_sharp</var></a></td>
<td class="doc"><p>create enharmonic table for sharp / flat correspondence</p>
</td>
</tr>
</table>
<div class="heading">Functions</div>
<table class="functions ">
<tr>
<td class="name"><a href="#SharpOrFlat.sharp_or_flat"><var>SharpOrFlat:sharp_or_flat</var></a>()</td>
<td class="doc"><p>This method aims to determine if reaCAT has to use sharp or flat in chords name</p>
</td>
</tr>
<tr>
<td class="name"><a href="#SharpOrFlat.apply_keysign"><var>SharpOrFlat:apply_keysign</var></a>()</td>
<td class="doc"><p>This method  toggle enharmonic value on already existing chords symbols according to key signature detection
<div class="see">See also <a href="../module/SharpOrFlat.html#SharpOrFlat.sharp_or_flat">SharpOrFlat.sharp_or_flat()</a></div>
</td>
</tr>
</table>
</div>
<h3 class="fields">Fields</h3>
<dl class="fields">
<dt id="SharpOrFlat.enharmonic_table_sharp">
<span class="icon"></span><var>SharpOrFlat.enharmonic_table_sharp</var>
<a class="permalink" href="#SharpOrFlat.enharmonic_table_sharp" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>create enharmonic table for sharp / flat correspondence</p>

</dd>
</dl>
<h3 class="functions">Functions</h3>
<dl class="functions">
<dt id="SharpOrFlat.sharp_or_flat">
<span class="icon"></span><var>SharpOrFlat:sharp_or_flat</var>(<em>take</em>)
<a class="permalink" href="#SharpOrFlat.sharp_or_flat" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>This method aims to determine if reaCAT has to use sharp or flat in chords name. It uses item keysignature.
<div class="see">See also <a href="../module/SharpOrFlat.html#SharpOrFlat.get_key_sign_at_ppq">SharpOrFlat.get_key_sign_at_ppq()</a></div>

<div class="heading">Parameters</div>
<table class="parameters">
<tr>
<td class="name"><var>take</var></td>
<td class="types">(<em>take</em>)</td>
<td class="doc"><p>is a valid reaper MIDI take</p>
</td>
</tr>
</table>
<div class="heading">Return Values</div>
<table class="returns">
<tr>
<td class="name">1.</td>
<td class="types">(<em>tab</em>)</td>
<td class="doc"><p>acc_ref_table is the basic array containing either sharp or flat notes once the script has proceed</p>
</td>
</tr>
<tr>
<td class="name">2.</td>
<td class="types">(<em>str</em>)</td>
<td class="doc"><p>accidentals is a (#) or a (b) symbol. We can use this variable information to know if we use sharp or flat</p>
</td>
</tr>
</table>
</dd>
<dt id="SharpOrFlat.apply_keysign">
<span class="icon"></span><var>SharpOrFlat:apply_keysign</var>(<em>chord</em>, <em>take</em>)
<a class="permalink" href="#SharpOrFlat.apply_keysign" title="Permalink to this definition">¶</a>
</dt>
<dd>
<p>This method  toggle enharmonic value on already existing chords symbols according to key signature detection
<div class="see">See also <a href="../module/SharpOrFlat.html#SharpOrFlat.sharp_or_flat">SharpOrFlat.sharp_or_flat()</a></div>

<div class="heading">Parameters</div>
<table class="parameters">
<tr>
<td class="name"><var>chord</var></td>
<td class="types">(<em>sting</em>)</td>
<td class="doc"><p>the chord you want to process. Chord has to be in a english form with letter (ex: Am7/9 or F7/D#), latin form aren't supported (ex: Lam7/9 or Fa7/Re#).</p>
</td>
</tr>
<tr>
<td class="name"><var>take</var></td>
<td class="types">(<em>take</em>)</td>
<td class="doc"><p>is a Reaper take</p>
</td>
</tr>
</table>
<div class="heading">Return Values</div>
<table class="returns">
<tr>
<td class="types">(<em>string</em>)</td>
<td class="doc"><p>chord the chord processed</p>
</td>
</tr>
</table>
</dd>
</dl>
</div>
</div>
</div>
<script src="../prism.js?7653a2d"></script>
</body>
</html>